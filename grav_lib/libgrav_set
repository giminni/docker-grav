#!/usr/bin/env bash

#
# Setcore function for grav_setcore.sh script
#
setcore() {
   local _RC=0
   local _GRAV_CORE="${1}"

   case "${_GRAV_CORE}" in
      all)
         ${0} dev
         ${0} prod
      ;;

      dev) echo "GRAV_DEV=$(wget -O - -o /dev/null https://getgrav.org | grep 'Release Candidate Version' | sed -e 's/<[^>]*>//g' | awk '{print $4}')" > "${CFG_DIR}"/.config.dev 
      ;;
          
      [0-9]*.[0-9]*.[0-9]*-[a-z][a-z].[0-9]*\?testing)
         echo "GRAV_DEV=${_GRAV_CORE}"  > "${CFG_DIR}"/.config.dev 
      ;;

      prod) echo "GRAV_PROD=$(wget -O - -o /dev/null https://getgrav.org | grep 'Stable Version' | sed -e 's/<[^>]*>//g' | awk '{print $3}')"  > "${CFG_DIR}"/.config.prod 
      ;;
      
      [0-9]*.[0-9]*.[0-9]*)
         echo "GRAV_PROD=${_GRAV_CORE}"  > "${CFG_DIR}"/.config.prod 
      ;;

      *) error 2 "FAIL: Argument is not defined: ${_GRAV_CORE}!"
      ;;

   esac

   return ${_RC}
}

